query GetPool($id: String!, $chain: GqlChain!, $userAddress: String) {
  pool: poolGetPool(id: $id, chain: $chain, userAddress: $userAddress) {
    id
    address
    name
    version
    owner
    swapFeeManager
    pauseManager
    poolCreator
    decimals
    factory
    symbol
    createTime
    type
    chain
    protocolVersion
    tags
    hasErc4626
    hasNestedErc4626
    liquidityManagement {
      disableUnbalancedLiquidity
    }
    hook {
      ...Hook
    }
    dynamicData {
      poolId
      swapEnabled
      totalLiquidity
      totalShares
      fees24h
      surplus24h
      swapFee
      volume24h
      holdersCount
      isInRecoveryMode
      isPaused
      aprItems {
        id
        title
        apr
        type
        rewardTokenSymbol
        rewardTokenAddress
      }
    }
    staking {
      id
      type
      chain
      address
      gauge {
        id
        gaugeAddress
        version
        status
        workingSupply
        otherGauges {
          gaugeAddress
          version
          status
          id
          rewards {
            id
            tokenAddress
            rewardPerSecond
          }
        }
        rewards {
          id
          rewardPerSecond
          tokenAddress
        }
      }
      aura {
        id
        apr
        auraPoolAddress
        auraPoolId
        isShutdown
      }
    }
    userBalance {
      totalBalance
      totalBalanceUsd
      walletBalance
      walletBalanceUsd
      stakedBalances {
        balance
        balanceUsd
        stakingType
        stakingId
      }
    }
    ... on GqlPoolWeighted {
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolStable {
      amp
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolMetaStable {
      amp
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolElement {
      unitSeconds
      principalToken
      baseToken
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolComposableStable {
      amp
      bptPriceRate
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolLiquidityBootstrapping {
      name
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolLiquidityBootstrappingV3 {
      endTime
      lbpName
      description
      discord
      poolTokens {
        ...PoolTokens
      }
      projectToken
      projectTokenIndex
      projectTokenEndWeight
      projectTokenStartWeight
      reserveToken
      telegram
      startTime
      website
      x
    }
    ... on GqlPoolGyro {
      alpha
      beta
      type
      c
      dSq
      lambda
      root3Alpha
      s
      sqrtAlpha
      sqrtBeta
      tauAlphaX
      tauAlphaY
      tauBetaX
      tauBetaY
      u
      v
      w
      z
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolFx {
      alpha
      beta
      delta
      epsilon
      lambda
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolQuantAmmWeighted {
      hasAnyAllowedBuffer
      weightSnapshots {
        timestamp
        weights
      }
      poolTokens {
        ...PoolTokens
      }
    }
    ... on GqlPoolReClamm {
      hasAnyAllowedBuffer
      poolTokens {
        ...PoolTokens
      }
    }
  }
}

query GetPoolSnapshots($poolId: String!, $range: GqlPoolSnapshotDataRange!, $chainId: GqlChain!) {
  snapshots: poolGetSnapshots(id: $poolId, range: $range, chain: $chainId) {
    id
    timestamp
    totalLiquidity
    volume24h
    fees24h
    surplus24h
    sharePrice
  }
}

query GetPoolTokensDynamicData($addresses: [String!]!, $chain: GqlChain!) {
  dynamicData: tokenGetTokensDynamicData(addresses: $addresses, chain: $chain) {
    ...GqlTokenDynamicData
  }
}

query GetPoolEvents(
  $first: Int
  $skip: Int
  $poolId: String
  $chainIn: [GqlChain!]
  $type: GqlPoolEventType
  $userAddress: String
) {
  poolEvents(
    first: $first
    skip: $skip
    where: {
      poolId: $poolId
      chainIn: $chainIn
      type: $type
      userAddress: $userAddress
    }
  ) {
    id
    poolId
    timestamp
    tx
    type
    valueUSD
    chain
    userAddress
    ... on GqlPoolSwapEventV3 {
      tokenIn {
        address
        amount
      }
      tokenOut {
        address
        amount
      }
    }
    ... on GqlPoolSwapEventCowAmm {
      tokenIn {
        address
        amount
        valueUSD
      }
      tokenOut {
        address
        amount
        valueUSD
      }
      surplus {
        address
        amount
        valueUSD
      }
    }
    ... on GqlPoolAddRemoveEventV3 {
      tokens {
        address
        amount
        valueUSD
      }
    }
  }
}
